# ドライブレコーダー動画合成スクリプト

ドライブレコーダーで撮影された前方カメラと後方カメラの2つの動画ファイルを、ピクチャー・イン・ピクチャー形式で1つの動画に合成するPerlスクリプトです。

## 必要なもの

- **Perl**: スクリプトの実行に必要です。
- **ffmpeg**: 動画のエンコードに必要です。事前にインストールし、コマンドラインから実行できるようパスを通してください。

## ファイル名の規約

本スクリプトは、動画ファイルが以下の命名規則に従っていることを前提としています。

- **前方カメラの動画**: `（任意のファイル名）.MOV`
- **後方カメラの動画**: `（任意のファイル名）R.MOV`

例: 前方カメラの動画が `20250803_120000.MOV` の場合、後方カメラの動画は `20250803_120000R.MOV` という名前で同じディレクトリに存在する必要があります。

## 使い方

単一のファイルを処理する方法と、ディレクトリ内のファイルをまとめて処理する方法があります。

### 単一のファイルを処理する場合

前方カメラの動画ファイルのパスを引数として指定します。スクリプトは対応する後方カメラのファイルを自動的に探します。

```bash
perl overlay.pl /path/to/your/video.MOV
```

### ディレクトリ内の全ファイルを処理する場合

動画ファイルが保存されているディレクトリのパスを引数として指定します。スクリプトはディレクトリ内の `.MOV` ファイル（後方カメラの `R.MOV` を除く）をすべて検索し、処理を実行します。

```bash
perl overlay.pl /path/to/your/videos/
```

## 出力ファイル

処理後の動画は `（元のファイル名）.mp4` という名前で、元のファイルと同じディレクトリに保存されます。
